Mini2.define("Mini2.ui.WindowHeader",{renderTo:Mini2.getBody(),text:"Window",headerTpl:['<div class="mi-window-header ',"mi-header ","mi-header-horizontal ","mi-header-draggable ","mi-docked ","mi-unselectable ","mi-window-header-default ","mi-horizontal ","mi-window-header-horizontal ","mi-window-header-default-horizontal ","mi-top ","mi-window-header-top ","mi-window-header-default-top ","mi-docked-top ","mi-window-header-docked-top ",'mi-window-header-default-docked-top" ','style="right: auto; left: -5px; top: -5px; width: 400px; ">','<div class="mi-header-body ',"mi-window-header-body ","mi-window-header-body-default ","mi-window-header-body-horizontal ","mi-window-header-body-default-horizontal ","mi-window-header-body-top ","mi-window-header-body-default-top ","mi-window-header-body-default-docked-top ","mi-box-layout-ct ","mi-window-header-body-default-horizontal ",'mi-window-header-body-default-top " ','style="width: 380px; ">','<div class="mi-box-inner " role="presentation" style="width: 380px; height: 16px; ">','<div class="mi-box-target" style="width: 380px; ">','<div class="mi-component ',"mi-header-text-container ","mi-window-header-text-container ","mi-window-header-text-container-default ",'mi-box-item mi-component-default" ','unselectable="on" ','style="right: auto; left: 0px; top: 0px; margin: 0px; width: 358px; ">','<span class="mi-header-text ',"mi-window-header-text ",'mi-window-header-text-default" ','unselectable="on">',"Window","</span>","</div>",'<div class="mi-tool ',"mi-box-item ","mi-tool-default ",'mi-tool-after-title" ','title="¹Ø±Õ"','style="width: 16px; height: 16px; right: auto; left: 364px; top: 0px; margin: 0px; " >','<img role="presentation" ','src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" ','class="mi-tool-img mi-tool-close">',"</div>","</div>","</div>","</div>","</div>"],setText:function(a){this.headerTextEl.html(a)},getText:function(){return this.headerTextEl.html()},setWidth:function(b){var a=this;a.el.css("width",b);a.boxInnerEl.css("width",b-20);a.boxTargetEl.css("width",b-20);a.textContainerEl.css("width",b-32);a.toolEl.css("left",b-36)},srcLocation:{},srcX:0,srcY:0,button1:false,isDrag:false,mouseBind:function(a){var b=this;a.muBind("mousedown",b,function(c){b.button1=true;b.srcLocation=b.owner.getOffset();b.srcX=event.pageX;b.srcY=event.pageY;b.owner.focus()}).muBind("mouseup",b,function(c){b.button1=false;if(b.isDrag){b.isDrag=false;b.owner.endDrag();Mini2.EventManager.stopEvent()}}).muBind("mousemove",b,function(c){if(b.button1){var d=event.pageX-b.srcX;var f=event.pageY-b.srcY;var g=d+b.srcLocation.left;var h=f+b.srcLocation.top;if(!b.isDrag){if(Math.abs(d)>=4||Math.abs(f)>=4){b.isDrag=true;b.owner.beginDrag()}}else{if(b.isDrag){b.owner.setGhostLocation(g,h)}}}})},render:function(){var f=this;var c=Mini2.$joinStr(f.headerTpl);var d=c.cFirst(".mi-header-body");var a=d.cFirst(".mi-box-inner");var b=a.cFirst(".mi-box-target");var g=b.cFirst(".mi-header-text-container");var e=g.cFirst(".mi-header-text");var h=b.cFirst(".mi-tool");e.html(f.text);f.el=c;f.headerBodyEl=d;f.boxInnerEl=a;f.boxTargetEl=b;f.textContainerEl=g;f.headerTextEl=e;f.toolEl=h;$(h).mouseenter(function(){$(this).addClass("mi-tool-over")}).mouseout(function(){$(this).removeClass("mi-tool-over")}).muBind("mousedown",Mini2.emptyFn).muBind("mouseup",function(){f.onAction("close")});$(f.renderTo).append(c);f.mouseBind(c)},onAction:function(a){$(this).triggerHandler("action",[a]);Mini2.EventManager.stopEvent()}});