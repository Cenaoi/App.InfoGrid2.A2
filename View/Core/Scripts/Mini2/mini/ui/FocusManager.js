Mini2.define("Mini2.ui.FocusManager",{singleton:true,alternateClassName:["Mini2.ui.FocusMgr"],control:null,data:null,scope:null,el:null,offsetParent:function(b){var a=$(b);if(a.hasClass("mi-border-box")){return b}for(var c=0;c<999;c++){a=a.parent();if(a.hasClass("mi-border-box")){break}}return a},getBorderBox:function(b){var d=this;if(b==undefined){return d}if(b.toString()=="[object Window]"){b=window.document.body}if(b.el){if(b.el.jquery){b=b.el.get(0)}else{if(Mini2.isDom(b.el)){b=b.el}}}if(!Mini2.isDom(b)){return d}var a;if($(b).hasClass("mi-border-box")){a=$(b)}else{a=d.offsetParent(b)}var c=null;if(a.size()>0){c=a.data("FOCUS_MANAGER");if(!c){c={control:null,data:null,scope:null,el:a.get(0),typeString:a.get(0).toString(),muid:"F_"+Mini2.getIdentity()};a.data("FOCUS_MANAGER",c)}return c}return d},clear:function(a){var b=this,c=b.getBorderBox(a);c.data=null;c.scope=null;c.control=null},setControl:function(a,b,h){var f=this,g=f.getBorderBox(a),c=g.control,d=g.data;if(undefined==h){h=a}if(undefined==b){b=null}if(c==a&&d==b){return}if(c){var e=f.getBorderBox(c);$(c).triggerHandler("focusout",[{sender:c,target:a,data:d}])}g.control=a;g.data=b;if(a){$(a).triggerHandler("focusin")}}});