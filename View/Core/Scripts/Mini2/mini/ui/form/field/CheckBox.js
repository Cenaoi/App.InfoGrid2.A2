Mini2.define("Mini2.ui.form.field.CheckBox",{extend:"Mini2.ui.form.field.Base",alternateClassName:"Mini2.ui.form.Checkbox",fieldCls:Mini2.baseCSSPrefix+"-form-type-checkbox",focusCls:Mini2.baseCSSPrefix+"form-checkbox-focus",checkedCls:Mini2.baseCSSPrefix+"form-cb-checked",componentLayout:"field",isCheckbox:true,checked:false,inputValue:"on",inputType:"checkbox",inputTypeAttr:"button",originalValue:false,lastValue:false,initComponent:function(){var a=this;$(a).muBind("focusout",function(){a.fieldEl.removeClass("mi-form-focus").removeClass(a.focusCls);a.el.removeClass("mi-form-trigger-wrap-focus")});a.initLabelable()},initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},baseSetValue:function(g){var d=this,c=d.el,f=d.srcInputEl,b=d.checkedCls,a,e=d.originalValue;if(g){c.addClass(b)}else{c.removeClass(b)}d.lastValue=d.checked;d.checked=a=!!g;if(f){f.attr("checked",a)}},setValue:function(g){var d=this,c=d.el,f=d.srcInputEl,b=d.checkedCls,a,e=d.originalValue;if(g){c.addClass(b)}else{c.removeClass(b)}d.lastValue=d.checked;d.checked=a=!!g;if(f){f.attr("checked",a)}if(a!=e){d.onChange(a,e)}},getValue:function(){return this.checked},onChange:function(b,c){var a=this;if(Mini2.isFunction(a.change)){a.change.call(this,b,c)}$(a).triggerHandler("change",[b,c])},renderForLableable:function(d){var c=this,a=c.labelable,b;if(a&&!a.hideLabel){b=a.getEl();if(c.clientId){b.attr("for",c.clientId)}b.muBind("mousedown",function(f){c.focus()});b.muBind("mouseup",function(f){c.setValue(!c.checked);Mini2.EventManager.stopEvent(f)});c.appendCell(d,b,"td.mi-field-label-cell:first");if(c.checked){d.addClass("mi-form-cb-checked")}}},renderForBoxLabel:function(d){var c=this,a=c.boxLabel;if(a){var b=Mini2.$joinStr(['<label class="mi-form-cb-label mi-form-cb-label-after" for="',c.clientId,'">',a,"</label>"]);b.muBind("mousedown",function(f){c.focus()});b.muBind("mouseup",function(f){c.setValue(!c.checked);Mini2.EventManager.stopEvent(f)});c.boxLableEl=b;c.appendCell(d,b,"td.mi-form-item-body:first")}},initSrcInput:function(){var a=this,b;a.srcInputEl=b=Mini2.$joinStr(['<input type="checkbox" style="display:none;" />']);b.attr("name",a.name).attr("value",a.inputValue);if(a.checked){b.attr("checked",true)}},getFieldEl:function(){var c=this,b,a=c.checkedCls;c.initSrcInput();c.inputEl=b=Mini2.$joinStr(['<input type="button" class="mi-form-field mi-form-checkbox mi-form-cb " ','autocomplete="off" ','hidefocus="true" ','aria-invalid="false" ','data-errorqtip="" style="" >']);b.attr("id",c.clientId);$(b).muBind("mousedown",function(d){c.focus();Mini2.EventManager.stopEvent(d)}).muBind("mouseup",function(d){var f=c.el.hasClass(c.checkedCls);c.setValue(!f);Mini2.EventManager.stopEvent(d)});return b}});