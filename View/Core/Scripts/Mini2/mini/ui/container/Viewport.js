Mini2.define("Mini2.ui.container.Viewport",{alias:"Mini2.ui.Viewport",layout:"border",owner:window,el:null,margin:{top:0},initComponent:function(){var a=this;a.length=0;a.region={north:[],south:[],west:[],east:[],center:[]};a.isHide_north=false;a.isHide_south=false;a.isHide_west=false;a.isHide_east=false},toggleRegion:function(c){var b=this,a=b.isVisibled(c);if(a){b.hideRegion(c)}else{b.showRegion(c)}return b},isVisibled:function(c){var b=this,d,a=false;d="isHide_"+c;a=b[d];return !a},showRegion:function(h){var c=this,a=c.el,d=c.region,e,b=d[h];if(b&&b.length){if("west"==h){if(!c.isHide_west){return}c.isHide_west=false;e=b[0];var g=e.getWidth();var k=0;var l=-g;e.show().animate({left:0},"fast","swing")}else{if("east"==h){if(!c.isHide_east){return}c.isHide_east=false;e=b[0];var j=a.width();var g=e.getWidth();var k=j-g;var l=j;e.setLeft(l).show().animate({left:k},"fast","swing")}else{if("north"==h){if(!c.isHide_north){return}c.isHide_north=false;e=b[0];var f=e.getHeight();var m=0;var n=-f;e.setTop(n).show().animate({top:m},"fast","swing")}else{if("south"==h){if(!c.isHide_south){return}c.isHide_south=false;e=b[0];var i=a.height();var f=e.getHeight();var m=i-f;var l=i;e.setTop(l).show().animate({top:k},"fast","swing")}}}}c.resize(c.owner)}},hideRegion:function(i){var d=this,a=d.el,e=d.region,c=d.margin,f,b=e[i];if(b&&b.length){if("west"==i){if(d.isHide_west){return}d.isHide_west=true;f=b[0];var h=f.getWidth();var k=0;var l=-h;f.animate({left:l},"fast","swing",function(){f.hide()})}else{if("east"==i){if(d.isHide_east){return}d.isHide_east=true;f=b[0];var j=a.width();var h=f.getWidth();var k=j-h;var l=j;f.animate({left:l},"fast","swing",function(){f.hide()})}else{if("north"==i){if(d.isHide_north){return}d.isHide_north=true;f=b[0];var g=f.getHeight();var m=c.top;var n=-g+c.top;f.animate({top:n,"z-index":800},"fast","swing",function(){f.hide()})}else{if("south"==i){}}}}d.resize(d.owner)}},winResize:function(a){var b=a.data.owner;b.resize(b.owner)},resize:function(n){var k=this,a=k.el,l=k.region,b,o,i=k.margin,m=i.top||0,j=i.buttom||0,c=0,d=0,e=0,p=0,q=0,r=0;n=n||k.owner;c=k.isHide_north?0:k.getItemsHeight(l.north);e=k.isHide_south?0:k.getItemsHeight(l.south);p=k.isHide_west?0:k.getItemsWidth(l.west);r=k.isHide_east?0:k.getItemsWidth(l.east);if(n&&n.muid){o=n.getWidth();b=n.getHeight()}else{o=$(n).width();b=$(n).height()}b-=(m+j);a.css({width:o,height:b});d=b-c-e;q=o-p-r;if(l.north.length||l.south.length){k.setItemsTop(0,l.north);k.setItemsTop(c+d,l.south);k.setItemsWidth(o,l.north);k.setItemsWidth(o,l.south)}if(l.west.length||l.east.length){var f=c+(l.north.length?4:0);k.setItemsTop(f,l.west);k.setItemsTop(f,l.east);k.setItemsLeft(0,l.west);k.setItemsLeft(p+q,l.east);var g=d-(l.north.length?3:0)-(l.south.length?3:0);k.setItemsHeight(g,l.west);k.setItemsHeight(g,l.east)}if(l.center.length){var s=p+(l.west.length?4:0);var t=q-(l.west.length?4:0)-(l.east.length?4:0);var f=c+(l.north.length?4:0);var g=d-(l.north.length?3:0)-(l.south.length?3:0);k.setItemsLeft(s,l.center);k.setItemsTop(f,l.center);k.setItemsWidth(t,l.center);k.setItemsHeight(g,l.center)}},setItemsWidth:function(d,b){var c=this,a;$(b).each(function(){a=this;if(a.isVisible&&a.isVisible()){a.setWidth(d)}})},setItemsHeight:function(a,c){var d=this,b;$(c).each(function(){b=this;if(b.isVisible&&b.isVisible()){b.setHeight(a)}})},setItemsTop:function(e,b){var c=this,a,d=e;$(b).each(function(){a=this;if(a.isVisible&&a.isVisible()){a.setTop(d);d+=a.getHeight()}})},setItemsLeft:function(e,b){var c=this,a,d=e;$(b).each(function(){a=this;if(a.isVisible&&a.isVisible()){a.setLeft(d);d+=a.getWidth()}})},getItemsWidth:function(b){var c=this,a,d=0;$(b).each(function(){a=this;if(a.isVisible&&a.isVisible()){d+=a.getWidth()}});return d},getItemsHeight:function(b){var c=this,a,d=0;$(b).each(function(){a=this;if(a.isVisible&&a.isVisible()){d+=a.getHeight()}});return d},getItem:function(c){var a=this,b;if(c.muid){return c}b=Mini2.create("Mini2.ui.panel.Panel",c);b.render();return b},baseRender:function(){var h=this,b,d=0,g=h.margin,e,f=h.items;h.el=b=$(h.contentEl);if(g){b.css({position:"absolute",top:g.top})}if(f){for(d;d<f.length;d++){e=f[d];if(!e||!e.contentEl){continue}if(!Mini2.isString(e.contentEl)){continue}var a=e.contentEl.substr(0,1);if(a=="#"){var j=Mini2.create("Mini2.ui.panel.Panel",e);j.render();f[d]=j}}}},afterRender:function(){var d=this,a=0,b,g,f,e=d.region,c=d.items,h;if(c){for(a;a<c.length;a++){b=c[a];if(b.isAfterRender){b=window[b.id]}g=b.region||"north";f=d.getItem(b);f.el.addClass("mi-box-item");h=e[g];if(h){h.push(f)}else{e.center.push(f)}}delete d.items}},setZIndex:function(b,e){var c=this,a,d;if(b){d=b.length;while(d--){b[d].css("z-index",e)}}},resetZIndex:function(){var b=this,c=b.region,a,d=b.setZIndex;d(c.center,50);d(c.north,40);d(c.south,30);d(c.west,20);d(c.east,10)},render:function(){var a=this;a.baseRender();a.resetZIndex();Mini2.LoaderManager.afterRender(a);Mini2.LoaderManager.resize(a)}},function(){var a=this;Mini2.apply(this,arguments[0]);a.initComponent()});