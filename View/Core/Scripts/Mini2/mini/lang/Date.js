Mini2.Date=new function(){var h=this,g=/(\\.)/g,c=/([gGhHisucUOPZ]|MS)/,b=/([djzmnYycU]|MS)/,f=/\\/gi,e=/\{(\d+)\}/g,d=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),a=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Mini2.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear(),","jan4 = new Date(year, 0, 4, 0, 0, 0),","week1monday = new Date(jan4.getTime() - ((jan4.getDay() - 1) * 86400000));","v = Mini2.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");function i(k){var j=Array.prototype.slice.call(arguments,1);return k.replace(e,function(n,l){return j[l]})}Mini2.apply(h,{now:Date.now||function(){return +new Date()},toString:function(j){var k=Mini2.String.leftPad;return j.getFullYear()+"-"+k(j.getMonth()+1,2,"0")+"-"+k(j.getDate(),2,"0")+"T"+k(j.getHours(),2,"0")+":"+k(j.getMinutes(),2,"0")+":"+k(j.getSeconds(),2,"0")},getElapsed:function(j,k){return Math.abs(j-(k||h.now()))},useStrict:false,formatCodeToRegex:function(j,k){var l=h.parseCodes[j];if(l){l=typeof l=="function"?l():l;h.parseCodes[j]=l}return l?Mini2.applyIf({c:l.c?i(l.c,k||"{0}"):l.c},l):{g:0,c:null,s:Mini2.String.escapeRegex(j)}},parseFunctions:{MS:function(j,l){var k=(j||"").match(d);return k?new Date(((k[1]||"")+k[2])*1):null},time:function(j,l){var k=parseInt(j,10);if(k||k===0){return new Date(k)}return null},timestamp:function(j,l){var k=parseInt(j,10);if(k||k===0){return new Date(k*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return h.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(j){return Mini2.Date.monthNames[j].substring(0,3)},getShortDayName:function(j){return Mini2.Date.dayNames[j].substring(0,3)},getMonthNumber:function(j){return Mini2.Date.monthNumbers[j.substring(0,1).toUpperCase()+j.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(j){return c.test(j.replace(g,""))},formatContainsDateInfo:function(j){return b.test(j.replace(g,""))},unescapeFormat:function(j){return j.replace(f,"")},formatCodes:{d:"Mini2.String.leftPad(this.getDate(), 2, '0')",D:"Mini2.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Mini2.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Mini2.Date.getSuffix(this)",w:"this.getDay()",z:"Mini2.Date.getDayOfYear(this)",W:"Mini2.String.leftPad(Mini2.Date.getWeekOfYear(this), 2, '0')",F:"Mini2.Date.monthNames[this.getMonth()]",m:"Mini2.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Mini2.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Mini2.Date.getDaysInMonth(this)",L:"(Mini2.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Mini2.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Mini2.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Mini2.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Mini2.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Mini2.String.leftPad(this.getHours(), 2, '0')",i:"Mini2.String.leftPad(this.getMinutes(), 2, '0')",s:"Mini2.String.leftPad(this.getSeconds(), 2, '0')",u:"Mini2.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Mini2.Date.getGMTOffset(this)",P:"Mini2.Date.getGMTOffset(this, true)",T:"Mini2.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){var j,k,n,o,m;for(j="Y-m-dTH:i:sP",k=[],n=0,o=j.length;n<o;++n){m=j.charAt(n);k.push(m=="T"?"'T'":h.getFormatCode(m))}return k.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(r,o,j,l,n,q,p){l=l||0;n=n||0;q=q||0;p=p||0;var k=h.add(new Date(r<100?100:r,o-1,j,l,n,q,p),h.YEAR,r<100?r-100:0);return r==k.getFullYear()&&o==k.getMonth()+1&&j==k.getDate()&&l==k.getHours()&&n==k.getMinutes()&&q==k.getSeconds()&&p==k.getMilliseconds()},parse:function(k,j,m){var l=h.parseFunctions;if(l[j]==null){h.createParser(j)}return l[j].call(h,k,Mini2.isDefined(m)?m:h.useStrict)},parseDate:function(k,j,l){return h.parse(k,j,l)},getFormatCode:function(j){var k=h.formatCodes[j];if(k){k=typeof k=="function"?k():k;h.formatCodes[j]=k}return k||("'"+Mini2.String.escape(j)+"'")},createFormat:function(l){var k=[],n=false,j="",m;for(m=0;m<l.length;++m){j=l.charAt(m);if(!n&&j=="\\"){n=true}else{if(n){n=false;k.push("'"+Mini2.String.escape(j)+"'")}else{k.push(h.getFormatCode(j))}}}h.formatFunctions[l]=Mini2.functionFactory("return "+k.join("+"))},createParser:function(n){var s=h.parseRegexes.length,m=1,k=[],r=[],t=false,l="",o=0,p=n.length,j=[],q;for(;o<p;++o){l=n.charAt(o);if(!t&&l=="\\"){t=true}else{if(t){t=false;r.push(Mini2.String.escape(l))}else{q=h.formatCodeToRegex(l,m);m+=q.g;r.push(q.s);if(q.g&&q.c){if(q.calcAtEnd){j.push(q.c)}else{k.push(q.c)}}}}}k=k.concat(j);h.parseRegexes[s]=new RegExp("^"+r.join("")+"$","i");h.parseFunctions[n]=Mini2.functionFactory("input","strict",i(a,s,k.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var j=[],k=0;k<7;j.push(h.getShortDayName(k)),++k){}return{g:0,c:null,s:"(?:"+j.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+h.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+h.monthNames.join("|")+")"}},M:function(){for(var j=[],k=0;k<12;j.push(h.getShortMonthName(k)),++k){}return Mini2.applyIf({s:"("+j.join("|")+")"},h.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Mini2.String.leftPad(hr, 2, '0') + Mini2.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Mini2.String.leftPad(hr, 2, '0') + Mini2.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var k=[],j=[h.formatCodeToRegex("Y",1),h.formatCodeToRegex("m",2),h.formatCodeToRegex("d",3),h.formatCodeToRegex("H",4),h.formatCodeToRegex("i",5),h.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",h.formatCodeToRegex("P",8).c,"}else{",h.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],m,n;for(m=0,n=j.length;m<n;++m){k.push(j[m].c)}return{g:1,c:k.join(""),s:[j[0].s,"(?:","-",j[1].s,"(?:","-",j[2].s,"(?:","(?:T| )?",j[3].s,":",j[4].s,"(?::",j[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(j,k){return h.format(j,k)},isEqual:function(j,k){if(j&&k){return(j.getTime()===k.getTime())}return !(j||k)},format:function(j,k){var l=h.formatFunctions;if(!Mini2.isDate(j)){return""}if(l[k]==null){h.createFormat(k)}return l[k].call(j)+""},getTimezone:function(j){return j.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(k,j){var l=k.getTimezoneOffset();return(l>0?"-":"+")+Mini2.String.leftPad(Math.floor(Math.abs(l)/60),2,"0")+(j?":":"")+Mini2.String.leftPad(Math.abs(l%60),2,"0")},getDayOfYear:function(k){var o=0,j=Mini2.Date.clone(k),n=k.getMonth(),l;for(l=0,j.setDate(1),j.setMonth(0);l<n;j.setMonth(++l)){o+=h.getDaysInMonth(j)}return o+k.getDate()-1},getWeekOfYear:(function(){var j=86400000,k=7*j;return function(m){var n=Date.UTC(m.getFullYear(),m.getMonth(),m.getDate()+3)/j,l=Math.floor(n/7),o=new Date(l*k).getUTCFullYear();return l-Math.floor(Date.UTC(o,0,7)/k)+1}}()),isLeapYear:function(j){var k=j.getFullYear();return !!((k&3)==0&&(k%100||(k%400==0&&k)))},getFirstDayOfMonth:function(j){var k=(j.getDay()-(j.getDate()-1))%7;return(k<0)?(k+7):k},getLastDayOfMonth:function(j){return h.getLastDateOfMonth(j).getDay()},getFirstDateOfMonth:function(j){return new Date(j.getFullYear(),j.getMonth(),1)},getLastDateOfMonth:function(j){return new Date(j.getFullYear(),j.getMonth(),h.getDaysInMonth(j))},getDaysInMonth:(function(){var j=[31,28,31,30,31,30,31,31,30,31,30,31];return function(k){var l=k.getMonth();return l==1&&h.isLeapYear(k)?29:j[l]}}()),getSuffix:function(j){switch(j.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(j){return new Date(j.getTime())},isDST:function(j){return new Date(j.getFullYear(),0,1).getTimezoneOffset()!=j.getTimezoneOffset()},clearTime:function(m,k){if(k){return Mini2.Date.clearTime(Mini2.Date.clone(m))}var l=m.getDate(),n,j;m.setHours(0);m.setMinutes(0);m.setSeconds(0);m.setMilliseconds(0);if(m.getDate()!=l){for(n=1,j=h.add(m,Mini2.Date.HOUR,n);j.getDate()!=l;n++,j=h.add(m,Mini2.Date.HOUR,n)){}m.setDate(l);m.setHours(j.getHours())}return m},add:function(l,p,q){var k=Mini2.Date.clone(l),m=Mini2.Date,n,o,j=0;if(!p||q===0){return k}o=q-parseInt(q,10);q=parseInt(q,10);if(q){switch(p.toLowerCase()){case Mini2.Date.MILLI:k.setTime(k.getTime()+q);break;case Mini2.Date.SECOND:k.setTime(k.getTime()+q*1000);break;case Mini2.Date.MINUTE:k.setTime(k.getTime()+q*60*1000);break;case Mini2.Date.HOUR:k.setTime(k.getTime()+q*60*60*1000);break;case Mini2.Date.DAY:k.setDate(k.getDate()+q);break;case Mini2.Date.MONTH:n=l.getDate();if(n>28){n=Math.min(n,Mini2.Date.getLastDateOfMonth(Mini2.Date.add(Mini2.Date.getFirstDateOfMonth(l),Mini2.Date.MONTH,q)).getDate())}k.setDate(n);k.setMonth(l.getMonth()+q);break;case Mini2.Date.YEAR:n=l.getDate();if(n>28){n=Math.min(n,Mini2.Date.getLastDateOfMonth(Mini2.Date.add(Mini2.Date.getFirstDateOfMonth(l),Mini2.Date.YEAR,q)).getDate())}k.setDate(n);k.setFullYear(l.getFullYear()+q);break}}if(o){switch(p.toLowerCase()){case Mini2.Date.MILLI:j=1;break;case Mini2.Date.SECOND:j=1000;break;case Mini2.Date.MINUTE:j=1000*60;break;case Mini2.Date.HOUR:j=1000*60*60;break;case Mini2.Date.DAY:j=1000*60*60*24;break;case Mini2.Date.MONTH:n=h.getDaysInMonth(k);j=1000*60*60*24*n;break;case Mini2.Date.YEAR:n=(h.isLeapYear(k)?366:365);j=1000*60*60*24*n;break}if(j){k.setTime(k.getTime()+j*o)}}return k},subtract:function(j,k,l){return h.add(j,k,-l)},between:function(j,l,k){var m=j.getTime();return l.getTime()<=m&&m<=k.getTime()},compat:function(){var j=window.Date,k,t=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],n=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],q=t.length,l=n.length,r,m,o;for(o=0;o<q;o++){r=t[o];j[r]=h[r]}for(k=0;k<l;k++){m=n[k];j.prototype[m]=function(){var p=Array.prototype.slice.call(arguments);p.unshift(this);return h[m].apply(h,p)}}}})};