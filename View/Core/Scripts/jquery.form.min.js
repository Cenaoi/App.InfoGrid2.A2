/*
* jQuery Form Plugin
* version: 3.18 (28-SEP-2012)
* @requires jQuery v1.5 or later
*
* Examples and documentation at: http://malsup.com/jquery/form/
* Project repository: https://github.com/malsup/form
* Dual licensed under the MIT and GPL licenses:
*    http://malsup.github.com/mit-license.txt
*    http://malsup.github.com/gpl-license-v2.txt
*/
(function(a){var d={};d.fileapi=a("<input type='file'/>").get(0).files!==undefined;d.formdata=window.FormData!==undefined;a.fn.ajaxSubmit=function(y){if(!this.length){e("ajaxSubmit: skipping submit process - no element selected");return this}var u,h,D,f=this;if(typeof y=="function"){y={success:y}}u=this.attr("method");h=this.attr("action");D=(typeof h==="string")?a.trim(h):"";D=D||window.location.href||"";if(D){D=(D.match(/^([^#]+)/)||[])[1]}y=a.extend(true,{url:D,success:a.ajaxSettings.success,type:u||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},y);var E={};this.trigger("form-pre-serialize",[this,y,E]);if(E.veto){e("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(y.beforeSerialize&&y.beforeSerialize(this,y)===false){e("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var C=y.traditional;if(C===undefined){C=a.ajaxSettings.traditional}var l=[];var A,g=this.formToArray(y.semantic,l);if(y.data){y.extraData=y.data;A=a.param(y.data,C)}if(y.beforeSubmit&&y.beforeSubmit(g,this,y)===false){e("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[g,this,y,E]);if(E.veto){e("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var z=a.param(g,C);if(A){z=(z?(z+"&"+A):A)}if(y.type.toUpperCase()=="GET"){y.url+=(y.url.indexOf("?")>=0?"&":"?")+z;y.data=null}else{y.data=z}var i=[];if(y.resetForm){i.push(function(){f.resetForm()})}if(y.clearForm){i.push(function(){f.clearForm(y.includeHidden)})}if(!y.dataType&&y.target){var x=y.success||function(){};i.push(function(k){var q=y.replaceTarget?"replaceWith":"html";a(y.target)[q](k).each(x,arguments)})}else{if(y.success){i.push(y.success)}}y.success=function(q,H,I){var k=y.context||this;for(var F=0,G=i.length;F<G;F++){i[F].apply(k,[q,H,I||f,f])}};var n=a("input:file:enabled[value]",this);var r=n.length>0;var v="multipart/form-data";var w=(f.attr("enctype")==v||f.attr("encoding")==v);var m=d.fileapi&&d.formdata;e("fileAPI :"+m);var B=(r||w)&&!m;var s;if(y.iframe!==false&&(y.iframe||B)){if(y.closeKeepAlive){a.get(y.closeKeepAlive,function(){s=o(g)})}else{s=o(g)}}else{if((r||w)&&m){s=p(g)}else{s=a.ajax(y)}}f.removeData("jqxhr").data("jqxhr",s);for(var t=0;t<l.length;t++){l[t]=null}this.trigger("form-submit-notify",[this,y]);return this;function j(k){var I=a.param(k).split("&");var F=I.length;var H={};var q,G;for(q=0;q<F;q++){G=I[q].split("=");H[decodeURIComponent(G[0])]=decodeURIComponent(G[1])}return H}function p(k){var F=new FormData();for(var G=0;G<k.length;G++){F.append(k[G].name,k[G].value)}if(y.extraData){var J=j(y.extraData);for(var H in J){if(J.hasOwnProperty(H)){F.append(H,J[H])}}}y.data=null;var I=a.extend(true,{},a.ajaxSettings,y,{contentType:false,processData:false,cache:false,type:u||"POST"});if(y.uploadProgress){I.xhr=function(){var K=jQuery.ajaxSettings.xhr();if(K.upload){K.upload.onprogress=function(L){var M=0;var N=L.loaded||L.position;var O=L.total;if(L.lengthComputable){M=Math.ceil(N/O*100)}y.uploadProgress(L,N,O,M)}}return K}}I.data=null;var q=I.beforeSend;I.beforeSend=function(L,K){K.data=F;if(q){q.call(this,L,K)}};return a.ajax(I)}function o(q){var Q=f[0],P,U,Z,R,V,k,W,ag,ab,X,ac,ad;var af=!!a.fn.prop;var L=a.Deferred();if(a(":input[name=submit],:input[id=submit]",Q).length){alert('Error: Form elements must not have name or id of "submit".');L.reject();return L}if(q){for(U=0;U<l.length;U++){P=a(l[U]);if(af){P.prop("disabled",false)}else{P.removeAttr("disabled")}}}Z=a.extend(true,{},a.ajaxSettings,y);Z.context=Z.context||Z;V="jqFormIO"+(new Date().getTime());if(Z.iframeTarget){k=a(Z.iframeTarget);X=k.attr("name");if(!X){k.attr("name",V)}else{V=X}}else{k=a('<iframe name="'+V+'" src="'+Z.iframeSrc+'" />');k.css({position:"absolute",top:"-1000px",left:"-1000px"})}W=k[0];ag={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var ah=(aj==="timeout"?"timeout":"aborted");e("aborting upload... "+ah);this.aborted=1;if(W.contentWindow.document.execCommand){try{W.contentWindow.document.execCommand("Stop")}catch(ai){}}k.attr("src",Z.iframeSrc);ag.error=ah;if(Z.error){Z.error.call(Z.context,ag,ah,aj)}if(R){a.event.trigger("ajaxError",[ag,Z,ah])}if(Z.complete){Z.complete.call(Z.context,ag,ah)}}};R=Z.global;if(R&&0===a.active++){a.event.trigger("ajaxStart")}if(R){a.event.trigger("ajaxSend",[ag,Z])}if(Z.beforeSend&&Z.beforeSend.call(Z.context,ag,Z)===false){if(Z.global){a.active--}L.reject();return L}if(ag.aborted){L.reject();return L}ab=Q.clk;if(ab){X=ab.name;if(X&&!ab.disabled){Z.extraData=Z.extraData||{};Z.extraData[X]=ab.value;if(ab.type=="image"){Z.extraData[X+".x"]=Q.clk_x;Z.extraData[X+".y"]=Q.clk_y}}}var H=1;var aa=2;function S(ai){var ah=ai.contentWindow?ai.contentWindow.document:ai.contentDocument?ai.contentDocument:ai.document;return ah}var J=a("meta[name=csrf-token]").attr("content");var I=a("meta[name=csrf-param]").attr("content");if(I&&J){Z.extraData=Z.extraData||{};Z.extraData[I]=J}function O(){var al=f.attr("target"),ah=f.attr("action");Q.setAttribute("target",V);if(!u){Q.setAttribute("method","POST")}if(ah!=Z.url){Q.setAttribute("action",Z.url)}if(!Z.skipEncodingOverride&&(!u||/post/i.test(u))){f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(Z.timeout){ad=setTimeout(function(){ac=true;G(H)},Z.timeout)}function ai(){try{var an=S(W).readyState;e("state = "+an);if(an&&an.toLowerCase()=="uninitialized"){setTimeout(ai,50)}}catch(am){e("Server abort: ",am," (",am.name,")");G(aa);if(ad){clearTimeout(ad)}ad=undefined}}var aj=[];try{if(Z.extraData){for(var ak in Z.extraData){if(Z.extraData.hasOwnProperty(ak)){if(a.isPlainObject(Z.extraData[ak])&&Z.extraData[ak].hasOwnProperty("name")&&Z.extraData[ak].hasOwnProperty("value")){aj.push(a('<input type="hidden" name="'+Z.extraData[ak].name+'">').attr("value",Z.extraData[ak].value).appendTo(Q)[0])}else{aj.push(a('<input type="hidden" name="'+ak+'">').attr("value",Z.extraData[ak]).appendTo(Q)[0])}}}}if(!Z.iframeTarget){k.appendTo("body");if(W.attachEvent){W.attachEvent("onload",G)}else{W.addEventListener("load",G,false)}}setTimeout(ai,15);Q.submit()}finally{Q.setAttribute("action",ah);if(al){Q.setAttribute("target",al)}else{f.removeAttr("target")}a(aj).remove()}}if(Z.forceSync){O()}else{setTimeout(O,10)}var K,M,N=50,F;function G(ak){if(ag.aborted||F){return}try{M=S(W)}catch(am){e("cannot access response document: ",am);ak=aa}if(ak===H&&ag){ag.abort("timeout");L.reject(ag,"timeout");return}else{if(ak==aa&&ag){ag.abort("server abort");L.reject(ag,"error","server abort");return}}if(!M||M.location.href==Z.iframeSrc){if(!ac){return}}if(W.detachEvent){W.detachEvent("onload",G)}else{W.removeEventListener("load",G,false)}var aq="success",al;try{if(ac){throw"timeout"}var an=Z.dataType=="xml"||M.XMLDocument||a.isXMLDoc(M);e("isXml="+an);if(!an&&window.opera&&(M.body===null||!M.body.innerHTML)){if(--N){e("requeing onLoad callback, DOM not available");setTimeout(G,250);return}}var ai=M.body?M.body:M.documentElement;ag.responseText=ai?ai.innerHTML:null;ag.responseXML=M.XMLDocument?M.XMLDocument:M;if(an){Z.dataType="xml"}ag.getResponseHeader=function(at){var au={"content-type":Z.dataType};return au[at]};if(ai){ag.status=Number(ai.getAttribute("status"))||ag.status;ag.statusText=ai.getAttribute("statusText")||ag.statusText}var aj=(Z.dataType||"").toLowerCase();var ap=/(json|script|text)/.test(aj);if(ap||Z.textarea){var ar=M.getElementsByTagName("textarea")[0];if(ar){ag.responseText=ar.value;ag.status=Number(ar.getAttribute("status"))||ag.status;ag.statusText=ar.getAttribute("statusText")||ag.statusText}else{if(ap){var ao=M.getElementsByTagName("pre")[0];var ah=M.getElementsByTagName("body")[0];if(ao){ag.responseText=ao.textContent?ao.textContent:ao.innerText}else{if(ah){ag.responseText=ah.textContent?ah.textContent:ah.innerText}}}}}else{if(aj=="xml"&&!ag.responseXML&&ag.responseText){ag.responseXML=ae(ag.responseText)}}try{K=T(ag,aj,Z)}catch(ak){aq="parsererror";ag.error=al=(ak||aq)}}catch(ak){e("error caught: ",ak);aq="error";ag.error=al=(ak||aq)}if(ag.aborted){e("upload aborted");aq=null}if(ag.status){aq=(ag.status>=200&&ag.status<300||ag.status===304)?"success":"error"}if(aq==="success"){if(Z.success){Z.success.call(Z.context,K,"success",ag)}L.resolve(ag.responseText,"success",ag);if(R){a.event.trigger("ajaxSuccess",[ag,Z])}}else{if(aq){if(al===undefined){al=ag.statusText}if(Z.error){Z.error.call(Z.context,ag,aq,al)}L.reject(ag,"error",al);if(R){a.event.trigger("ajaxError",[ag,Z,al])}}}if(R){a.event.trigger("ajaxComplete",[ag,Z])}if(R&&!--a.active){a.event.trigger("ajaxStop")}if(Z.complete){Z.complete.call(Z.context,ag,aq)}F=true;if(Z.timeout){clearTimeout(ad)}setTimeout(function(){if(!Z.iframeTarget){k.remove()}ag.responseXML=null},100)}var ae=a.parseXML||function(ai,ah){if(window.ActiveXObject){ah=new ActiveXObject("Microsoft.XMLDOM");ah.async="false";ah.loadXML(ai)}else{ah=(new DOMParser()).parseFromString(ai,"text/xml")}return(ah&&ah.documentElement&&ah.documentElement.nodeName!="parsererror")?ah:null};var Y=a.parseJSON||function(ah){return window["eval"]("("+ah+")")};var T=function(al,ak,aj){var ah=al.getResponseHeader("content-type")||"",am=ak==="xml"||!ak&&ah.indexOf("xml")>=0,ai=am?al.responseXML:al.responseText;if(am&&ai.documentElement.nodeName==="parsererror"){if(a.error){a.error("parsererror")}}if(aj&&aj.dataFilter){ai=aj.dataFilter(ai,ak)}if(typeof ai==="string"){if(ak==="json"||!ak&&ah.indexOf("json")>=0){ai=Y(ai)}else{if(ak==="script"||!ak&&ah.indexOf("javascript")>=0){a.globalEval(ai)}}}return ai};return L}};a.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&a.isFunction(a.fn.on);if(!g.delegation&&this.length===0){var f={s:this.selector,c:this.context};if(!a.isReady&&f.s){e("DOM not ready, queuing ajaxForm");a(function(){a(f.s,f.c).ajaxForm(g)});return this}e("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}if(g.delegation){a(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,b).on("submit.form-plugin",this.selector,g,c).on("click.form-plugin",this.selector,g,b);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,c).bind("click.form-plugin",g,b)};function c(f){var g=f.data;if(!f.isDefaultPrevented()){f.preventDefault();a(this).ajaxSubmit(g)}}function b(g){var k=g.target;var f=a(k);if(!(f.is(":submit,input:image"))){var j=f.closest(":submit");if(j.length===0){return}k=j[0]}var h=this;h.clk=k;if(k.type=="image"){if(g.offsetX!==undefined){h.clk_x=g.offsetX;h.clk_y=g.offsetY}else{if(typeof a.fn.offset=="function"){var i=f.offset();h.clk_x=g.pageX-i.left;h.clk_y=g.pageY-i.top}else{h.clk_x=g.pageX-k.offsetLeft;h.clk_y=g.pageY-k.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)}a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(w,k){var g=[];if(this.length===0){return g}var o=this[0];var l=w?o.getElementsByTagName("*"):o.elements;if(!l){return g}var p,r,u,x,h,t,s;for(p=0,t=l.length;p<t;p++){h=l[p];u=h.name;if(!u){continue}if(w&&o.clk&&h.type=="image"){if(!h.disabled&&o.clk==h){g.push({name:u,value:a(h).val(),type:h.type});g.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y})}continue}x=a.fieldValue(h,true);if(x&&x.constructor==Array){if(k){k.push(h)}for(r=0,s=x.length;r<s;r++){g.push({name:u,value:x[r]})}}else{if(d.fileapi&&h.type=="file"&&!h.disabled){if(k){k.push(h)}var m=h.files;if(m.length){for(r=0;r<m.length;r++){g.push({name:u,value:m[r],type:h.type})}}else{g.push({name:u,value:"",type:h.type})}}else{if(x!==null&&typeof x!="undefined"){if(k){k.push(h)}g.push({name:u,value:x,type:h.type,required:h.required})}}}}if(!w&&o.clk){var f=a(o.clk),q=f[0];u=q.name;if(u&&!q.disabled&&q.type=="image"){g.push({name:u,value:f.val()});g.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y})}}return g};a.fn.formSerialize=function(f){return a.param(this.formToArray(f))};a.fn.fieldSerialize=function(g){var f=[];this.each(function(){var k=this.name;if(!k){return}var l=a.fieldValue(this,g);if(l&&l.constructor==Array){for(var h=0,j=l.length;h<j;h++){f.push({name:k,value:l[h]})}}else{if(l!==null&&typeof l!="undefined"){f.push({name:this.name,value:l})}}});return a.param(f)};a.fn.fieldValue=function(j){for(var l=[],g=0,h=this.length;g<h;g++){var f=this[g];var k=a.fieldValue(f,j);if(k===null||typeof k=="undefined"||(k.constructor==Array&&!k.length)){continue}if(k.constructor==Array){a.merge(l,k)}else{l.push(k)}}return l};a.fieldValue=function(g,q){var l=g.name,r=g.type,s=g.tagName.toLowerCase();if(q===undefined){q=true}if(q&&(!l||g.disabled||r=="reset"||r=="button"||(r=="checkbox"||r=="radio")&&!g.checked||(r=="submit"||r=="image")&&g.form&&g.form.clk!=g||s=="select"&&g.selectedIndex==-1)){return null}if(s=="select"){var j=g.selectedIndex;if(j<0){return null}var f=[],p=g.options;var m=(r=="select-one");var k=(m?j+1:p.length);for(var h=(m?j:0);h<k;h++){var o=p[h];if(o.selected){var u=o.value;if(!u){u=(o.attributes&&o.attributes.value&&!(o.attributes.value.specified))?o.text:o.value}if(m){return u}f.push(u)}}return f}return a(g).val()};a.fn.clearForm=function(f){return this.each(function(){a("input,select,textarea",this).clearFields(f)})};a.fn.clearFields=a.fn.clearInputs=function(f){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var h=this.type,i=this.tagName.toLowerCase();if(g.test(h)||i=="textarea"){this.value=""}else{if(h=="checkbox"||h=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(f){if((f===true&&/hidden/.test(h))||(typeof f=="string"&&a(this).is(f))){this.value=""}}}}}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};a.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};a.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var g=a(this).parent("select");if(f&&g[0]&&g[0].type=="select-one"){g.find("option").selected(false)}this.selected=f}}})};a.fn.ajaxSubmit.debug=false;function e(){if(!a.fn.ajaxSubmit.debug){return}var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}})(jQuery);